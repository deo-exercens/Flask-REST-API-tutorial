language: python
services: docker
sudo: required
python:
  - '3.6'
branches:
  - master
before_install:
  - sudo apt-get install make
install:
  - 'pip install pipenv'
env:
  - COMPOSE_FILE=docker-compose.yml
script:
  - docker-compose up -d
  - docker-compose ps
  - python manage.py db init
  - python manage.py db migrate
  - python manage.py db upgrade
  - make fast-pylint
  - make test